var lang = {
  "en" : {
    "f_arctic":       "Arctic Conditions!",
    "f_penguins":     "Yikes, Penguins Everywhere!",
    "f_brr":          "Brr It's Freezing.",
    "f_cold":         "Man, That's Cold.",
    "f_chilly":       "Quite Chilly Outside, Huh?",
    "f_rock":         "Temperate, Rock On!",
    "f_cruising":     "Cruising the Middle.",
    "f_regular":      "Fairly Regular, Mate.",
    "f_dang":         "Dang That's Hot!",
    "f_sweating":     "Sweating Like a Pig.",
    "f_strong":       "The Temperature Is Strong With This One.",
    "f_leet":         "1337 Degrees. Nice!",
    "f_kidding":      "Are You Kidding Me?",
    "f_armageddon":   "It's Like Armageddon Outside.",
    "f_volcano":      "Are You Living Inside a Volcano?",

    "feels":          "Feels",
    "its":            "It's %s °%s in %s",
    "description":    "%sThermo%s is a simple approach to Weather. This little pocket thermometer shows the current temperature outside."
  },
  "de": { // Tysk
    "f_arctic":       "Arktische Gegebenheiten!",
    "f_penguins":     "Hui, überall Pinguine!",
    "f_brr":          "Brr Es friert.",
    "f_cold":         "Oh man ist das kalt.",
    "f_chilly":       "Ganz sch&#246;n k&#252;hl drau&#223;en, nicht war?",
    "f_rock":         "Alles normal, weiter geht's!",
    "f_cruising":     "Mildes Fahrwasser.",
    "f_regular":      "Recht normal, Kollege.",
    "f_dang":         "Oha, das ist hei&#223;!",
    "f_sweating":     "Schwitzen wie Schweine.",
    "f_strong":       "Die Temperatur ist stark in ihm.",
    "f_leet":         "1337 Grad, sehr gut!",
    "f_kidding":      "Willst du mich verarschen?",
    "f_armageddon":   "Es ist wie die Apokalypse da drau&#223;en.",
    "f_volcano":      "Lebst du in einem Vulkan?",

    "feels":          "Gefühlt",
    "its":            "Es ist %s°%s in %s",
    "description":    "%sThermo%s ist ein simpler Ansatz zum derzeitigen Wetter. Dieses kleine Taschenthermometer zeigt dir derzeitige Temperatur drau&#223;en an."
  },
  "sv" : { // Svensk
    "f_arctic":       "Arktiska förhållanden!",
    "f_penguins":     "Oj, det är pingviner överallt!",
    "f_brr":          "Brr, det är svinkallt.",
    "f_cold":         "Alltså, det är kallt.",
    "f_chilly":       "Rätt så kallt ute, eller hur?",
    "f_rock":         "Temperaturen rockar!",
    "f_cruising":     "Glider i mitten.",
    "f_regular":      "Fairly Regular, Mate.",
    "f_dang":         "Helt sjukt varmt!",
    "f_sweating":     "Svettas som en gris.",
    "f_strong":       "Temperaturen är hög.",
    "f_leet":         "1337 grader. Häftigt!",
    "f_kidding":      "Skämtar du eller?",
    "f_armageddon":   "Det är som domedagen där ute.",
    "f_volcano":      "Bor du i en vulkan eller?",

    "feels":          "Känns",
    "its":            "Det är %s°%s i %s",
    "description":    "%sThermo%s är ett enkelt sätt att se vädret. Den här lilla ficktermometern visar den aktuella utomhustemperaturen."
  },
  "it" : {
    "f_arctic":       "Condizioni Artiche!",
    "f_penguins":     "Ci sono i pinguini!",
    "f_brr":          "Brr sto congelando.",
    "f_cold":         "Che freddo.",
    "f_chilly":       "Fa freddo fuori, eh?",
    "f_rock":         "Mite, evvai!",
    "f_cruising":     "Niente male.",
    "f_regular":      "Abbastanza Regolare, Amico.",
    "f_dang":         "Ammazza che caldo!",
    "f_sweating":     "Sto sudando come un maiale.",
    "f_strong":       "Qui fa proprio caldo.",
    "f_leet":         "1337 Gradi. Ottimo!",
    "f_kidding":      "Stai Scherzando?",
    "f_armageddon":   "C'e' l'apocalisse fuori.",
    "f_volcano":      "Abiti dentro un vulcano?",

    "feels":          "Percepiti",
    "its":            "%s°%s a %s",
    "description":    "%sThermo%s è un approccio semplice al meteo. Questo piccolo termometro da tasca mostra l'attuale temperatura esterna."
  },
  "ru": {
    "f_arctic":       "&#1040;&#1088;&#1082;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1077; &#1091;&#1089;&#1083;&#1086;&#1074;&#1080;&#1103;!",
    "f_penguins":     "&#1054;&#1081;, &#1087;&#1080;&#1085;&#1075;&#1074;&#1080;&#1085;&#1099; &#1087;&#1086;&#1074;&#1089;&#1102;&#1076;&#1091;!",
    "f_brr":          "&#1041;&#1088;&#1088;&#1088;&#8230; &#1055;&#1086;&#1076;&#1084;&#1086;&#1088;&#1072;&#1078;&#1080;&#1074;&#1072;&#1077;&#1090;.",
    "f_cold":         "&#1051;&#1102;&#1076;&#1080;, &#1101;&#1090;&#1086; &#1076;&#1077;&#1081;&#1089;&#1090;&#1074;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1093;&#1086;&#1083;&#1086;&#1076;&#1085;&#1086;.",
    "f_chilly":       "&#1044;&#1086;&#1074;&#1086;&#1083;&#1100;&#1085;&#1086; &#1093;&#1086;&#1083;&#1086;&#1076;&#1085;&#1086; &#1089;&#1085;&#1072;&#1088;&#1091;&#1078;&#1080;, &#1076;&#1072;?",
    "f_rock":         "&#1058;&#1077;&#1088;&#1087;&#1080;&#1084;&#1086;, &#1076;&#1072;&#1105;&#1096;&#1100; &#1088;&#1086;&#1082;!",
    "f_cruising":     "&#1044;&#1074;&#1080;&#1075;&#1072;&#1077;&#1084;&#1089;&#1103; &#1088;&#1086;&#1074;&#1085;&#1086;.",
    "f_regular":      "&#1044;&#1086;&#1074;&#1086;&#1083;&#1100;&#1085;&#1086; &#1085;&#1077;&#1087;&#1083;&#1086;&#1093;&#1086;, &#1087;&#1088;&#1080;&#1103;&#1090;&#1077;&#1083;&#1100;.",
    "f_dang":         "&#1063;&#1105;&#1088;&#1090; &#1087;&#1086;&#1073;&#1077;&#1088;&#1080;! &#1046;&#1072;&#1088;&#1082;&#1086;!",
    "f_sweating":     "&#1052;&#1086;&#1082;&#1088;&#1099;&#1081; &#1082;&#1072;&#1082; &#1084;&#1099;&#1096;&#1100;.",
    "f_strong":       "&#1069;&#1090;&#1072; &#1090;&#1077;&#1084;&#1087;&#1077;&#1088;&#1072;&#1090;&#1091;&#1088;&#1072; &#1089;&#1080;&#1083;&#1100;&#1085;&#1077;&#1077; &#1084;&#1077;&#1085;&#1103;.",
    "f_leet":         "1337 &#1075;&#1088;&#1072;&#1076;&#1091;&#1089;&#1086;&#1074;. &#1054;&#1090;&#1083;&#1080;&#1095;&#1085;&#1086;!",
    "f_kidding":      "&#1058;&#1099; &#1095;&#1090;&#1086;, &#1096;&#1091;&#1090;&#1080;&#1096;&#1100;?",
    "f_armageddon":   "&#1042;&#1089;&#1105;-&#1088;&#1072;&#1074;&#1085;&#1086;, &#1095;&#1090;&#1086; &#1040;&#1088;&#1084;&#1072;&#1075;&#1077;&#1076;&#1086;&#1085; &#1079;&#1072; &#1086;&#1082;&#1085;&#1086;&#1084;.",
    "f_volcano":      "&#1058;&#1099; &#1078;&#1080;&#1074;&#1077;&#1096;&#1100; &#1074;&#1085;&#1091;&#1090;&#1088;&#1080; &#1074;&#1091;&#1083;&#1082;&#1072;&#1085;&#1072;?",

    "feels":          "&#1055;&#1086; &#1086;&#1097;&#1091;&#1097;&#1077;&#1085;&#1080;&#1103;&#1084;",
    "its":            "%s°%s &#1074; %s",
    "description":    "%sThermo%s &#8211; &#1101;&#1090;&#1086; &#1087;&#1088;&#1086;&#1089;&#1090;&#1086;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1076;&#1083;&#1103; &#1087;&#1086;&#1075;&#1086;&#1076;&#1099;. &#1069;&#1090;&#1086;&#1090; &#1084;&#1072;&#1083;&#1077;&#1085;&#1100;&#1082;&#1080;&#1081; &#1082;&#1072;&#1088;&#1084;&#1072;&#1085;&#1085;&#1099;&#1081; &#1090;&#1077;&#1088;&#1084;&#1086;&#1084;&#1077;&#1090;&#1088; &#1087;&#1086;&#1082;&#1072;&#1079;&#1099;&#1074;&#1072;&#1077;&#1090; &#1090;&#1077;&#1082;&#1091;&#1097;&#1091;&#1102; &#1090;&#1077;&#1084;&#1087;&#1077;&#1088;&#1072;&#1090;&#1091;&#1088;&#1091; &#1079;&#1072; &#1086;&#1082;&#1085;&#1086;&#1084;."
  },
  "fr" : {
    "f_arctic":       "C'est le pôle nord!",
    "f_penguins":     "Hou la la! Il y a des pingouins partout!",
    "f_brr":          "Brrr ça caille.",
    "f_cold":         "Eh mon vieux, il fait froid.",
    "f_chilly":       "On se les gèles dehors, hein?",
    "f_rock":         "Tempéré, ça claque!",
    "f_cruising":     "Ni trop chaud, Ni trop froid",
    "f_regular":      "Assez régulier, mon gars.",
    "f_dang":         "Ouah! C'est chaud!",
    "f_sweating":     "On transpire comme des porcs.",
    "f_strong":       "Niveau température ça devient sérieux",
    "f_leet":         "1337 degrés. Pas mal!",
    "f_kidding":      "C'est une blague?",
    "f_armageddon":   "C'est l'Apocalypse dehors",
    "f_volcano":      "Est-ce que tu vis à l'intérieur d'un Volcan?",

    "feels":          "Ressenti",
    "its":            "Il fait %s°%s à %s",
    "description":    "%sThermo%s aborde la Météo en toute simplicité. Ce petit thermomètre de poche indique la température extérieure."
  },
  "cs" : {
    "f_arctic":       "Akrtick&#233; podm&#237;nky.",
    "f_penguins":     "Jejda, v&#353;ude jsou tu&#269;&#328;&#225;ci.",
    "f_brr":          "Brr, mrzne.",
    "f_cold":         "To je zima.",
    "f_chilly":       "Venku je docela chladno.",
    "f_rock":         "Teplota, rock on!",
    "f_cruising":     "P&#345;&#237;jemn&#283;.",
    "f_regular":      "Norm&#225;ln&#283;, k&#225;mo.",
    "f_dang":         "Pravda, že je horko.",
    "f_sweating":     "Spocený jako prase.",
    "f_strong":       "Hodn&#283; velk&#233; teplo.",
    "f_leet":         "1337 stup&#328;&#367;. N&#225;dhera!",
    "f_kidding":      "D&#283;l&#225;&#353; si srandu?",
    "f_armageddon":   "Venku je Armagedon.",
    "f_volcano":      "&#381;ije&#353; uvnit&#345; sopky?",

    "feels":          "Pocit",
    "its":            "Jsou %s°%s v %s",
    "description":    "%sThermo%s jednodu&#353;e zobrazuje informace o po&#269;as&#237;. Tento mal&#253; kapesn&#237; teplom&#283;r ukazuje aktu&#225;ln&#237; venkovn&#237; teplotu."
  },
  "pt" : {
    "f_arctic":       "Condições árticos!",
    "f_penguins":     "Vixiiii pingüins em todos lugares!",
    "f_brr":          "Brr que frio.",
    "f_cold":         "Isso foi frio, rapaz!",
    "f_chilly":       "Bem friorento lá fora, né?",
    "f_rock":         "Temperado!",
    "f_cruising":     "Passeando no meio.",
    "f_regular":      "Bem regular, amigo.",
    "f_dang":         "Meu deus, como esta quente!",
    "f_sweating":     "Suando como um porco.",
    "f_strong":       "A temperatura está forte com esse aqui.",
    "f_leet":         "1337 graus! Valeu!",
    "f_kidding":      "Você está brincando?",
    "f_armageddon":   "E como Armageddon lá fora.",
    "f_volcano":      "Você esta morando dentro de um volcano?",

    "feels":          "Sente",
    "its":            "&#201; %s°%s em %s",
    "description":    "%sThermo%s e uma maneira fácil para saber o tempo. Esse pequeno termômetro mostra como está a temperatura atual. "
  },
  "da" : {
    "f_arctic":       "Arktiske forhold!",
    "f_penguins":     "Uha, Pingviner alle steder!",
    "f_brr":          "Brr, det er iskoldt.",
    "f_cold":         "Mand, det er koldt.",
    "f_chilly":       "Ret køligt udenfor, ik'?",
    "f_rock":         "Tempereret, Wuhuu!",
    "f_cruising":     "Chiller' i midten.",
    "f_regular":      "Dansk sommer. Det bliver ikke bedre!",
    "f_dang":         "For søren, det er varmt!",
    "f_sweating":     "Sveder som en gris.",
    "f_strong":       "Temperaturen er stærk hos ham.",
    "f_leet":         "1337 grader. Fedt!",
    "f_kidding":      "Laver du sjov med mig?",
    "f_armageddon":   "Det er som dommedag udenfor.",
    "f_volcano":      "Bor du inde i en vulkan?",

    "feels":          "Føles",
    "its":            "Det er %s°%s i %s",
    "description":    "%sThermo%s er en simpel tilgang til vejr. Dette lille lomme thermometer viser temperaturen udenfor."
  },
  "mk" : {
    "f_arctic":       "&#1040;&#1088;&#1082;&#1090;&#1080;&#1095;&#1082;&#1072; &#1082;&#1083;&#1080;&#1084;&#1072;!",
    "f_penguins":     "&#1055;&#1080;&#1085;&#1075;&#1074;&#1080;&#1085;&#1080; &#1089;&#1077; &#1096;&#1077;&#1090;&#1072;&#1072;&#1090;!",
    "f_brr":          "&#1041;&#1088;&#1088;... &#1057;&#1084;&#1088;&#1079;&#1085;&#1091;&#1074;&#1072;&#1095;&#1082;&#1072;.",
    "f_cold":         "&#1057;&#1090;&#1091;&#1076;&#1077;&#1085;&#1080;&#1083;&#1086;.",
    "f_chilly":       "&#1050;&#1086;&#1095;&#1072;&#1085; &#1079;&#1080;&#1084;&#1072;.",
    "f_rock":         "&#1057;&#1088;&#1077;&#1076;&#1085;&#1072; &#1090;&#1077;&#1084;&#1087;&#1077;&#1088;&#1072;&#1090;&#1091;&#1088;&#1072;.",
    "f_cruising":     "&#1050;&#1083;&#1080;&#1084;&#1072; &#1079;&#1072; &#1091;&#1078;&#1080;&#1074;&#1072;&#1114;&#1077;.",
    "f_regular":      "&#1059;&#1084;&#1077;&#1088;&#1077;&#1085;&#1072; &#1082;&#1083;&#1080;&#1084;&#1072;.",
    "f_dang":         "&#1046;&#1077;&#1096;&#1090;&#1080;&#1085;&#1080;.",
    "f_sweating":     "&#1042;&#1088;&#1077;&#1084;&#1077; &#1079;&#1072; &#1087;&#1086;&#1090;&#1077;&#1114;&#1077;.",
    "f_strong":       "&#1058;&#1086;&#1087;&#1083;&#1086;&#1090;&#1077;&#1085; &#1073;&#1088;&#1072;&#1085;.",
    "f_leet":         "1337 &#1089;&#1090;&#1077;&#1087;&#1077;&#1085;&#1080;. &#1057;&#1091;&#1087;&#1077;&#1088;!",
    "f_kidding":      "&#1058;&#1088;&#1086;&#1087;&#1089;&#1082;&#1080; &#1075;&#1086;&#1088;&#1077;&#1096;&#1090;&#1080;&#1085;&#1080;.",
    "f_armageddon":   "&#1055;&#1077;&#1082;&#1086;&#1083;&#1085;&#1080; &#1075;&#1086;&#1088;&#1077;&#1096;&#1090;&#1080;&#1085;&#1080;.",
    "f_volcano":      "&#1042;&#1091;&#1083;&#1082;&#1072;&#1085;&#1089;&#1082;&#1072; &#1082;&#1083;&#1080;&#1084;&#1072;.",

    "feels":          "&#1095;&#1091;&#1074;&#1089;&#1090;&#1074;&#1091;&#1074;&#1072;",
    "its":            "&#1058;&#1077;&#1084;&#1087;&#1077;&#1088;&#1072;&#1090;&#1091;&#1088;&#1072;&#1090;&#1072; &#1077; %s&#176;%s &#1074;&#1086; %s",
    "description":    "%sThermo%s &#1077; &#1077;&#1076;&#1085;&#1086;&#1089;&#1090;&#1072;&#1074;&#1085;&#1072; &#1072;&#1083;&#1080;&#1082;&#1072;&#1094;&#1080;&#1112;&#1072; &#1079;&#1072; &#1074;&#1088;&#1077;&#1084;&#1077;&#1085;&#1089;&#1082;&#1072; &#1087;&#1088;&#1086;&#1075;&#1085;&#1086;&#1079;&#1072;. &#1054;&#1074;&#1086;&#1112; &#1084;&#1072;&#1083; &#1119;&#1077;&#1073;&#1077;&#1085; &#1090;&#1077;&#1088;&#1084;&#1086;&#1084;&#1077;&#1090;&#1072;&#1088; &#1112;&#1072; &#1087;&#1088;&#1080;&#1082;&#1072;&#1078;&#1091;&#1074;&#1072; &#1084;&#1086;&#1084;&#1077;&#1085;&#1090;&#1072;&#1083;&#1085;&#1072;&#1090;&#1072; &#1085;&#1072;&#1076;&#1074;&#1086;&#1088;&#1077;&#1096;&#1085;&#1072; &#1090;&#1077;&#1084;&#1087;&#1077;&#1088;&#1072;&#1090;&#1091;&#1088;&#1072;."
  },
  "nl" : {
    "f_arctic":       "IJskoud!",
    "f_penguins":     "Verhip, overal pinguïns!",
    "f_brr":          "Brr, het vriest.",
    "f_cold":         "Dat is koud zeg!",
    "f_chilly":       "Best kil buiten, of niet?",
    "f_rock":         "Gematigd, houden zo!",
    "f_cruising":     "Gemiddeld.",
    "f_regular":      "Vrij normaal, maat.",
    "f_dang":         "Het is bloedheet!",
    "f_sweating":     "Zweten als een otter.",
    "f_strong":       "Deze temperatuur heeft The Force.",
    "f_leet":         "1337 graden. Lekker!",
    "f_kidding":      "Houd je me voor de gek?",
    "f_armageddon":   "Het lijkt wel een oven buiten.",
    "f_volcano":      "Leef je in een vulkaan?",

    "feels":          "Voelt",
    "its":            "Het is %s°%s in %s",
    "description":    "%sThermo%s is een eenvoudige benadering van Weather. Deze kleine broekzak thermometer laat de huidige buitentemperatuur zien."
  },
  "zh" : {
    "f_arctic":       "北极的状态！",
    "f_penguins":     "哎呀，到处是企鹅！",
    "f_brr":          "嘶嘶，冻死了！",
    "f_cold":         "哎呀，冷啊！",
    "f_chilly":       "外面很冷啊！",
    "f_rock":         "温差不大",
    "f_cruising":     "温度适中",
    "f_regular":      "气温不冷不热",
    "f_dang":         "好热啊！",
    "f_sweating":     "汗流浃背了！",
    "f_strong":       "热死了！",
    "f_leet":         "温度已达1337度，真酷啊！",
    "f_kidding":      "你在开玩笑吧？",
    "f_armageddon":   "外面就像世界末日到了",
    "f_volcano":      "你是不是住在火炉里啊？",

    "feels":          "感觉像",
    "its":            "气温%s°%s在%s",
    "description":    "%sThermo%s是预报天气的简单节目，随时可以显示当前的室外温度。"
  },
  "fo" : {
    "f_arctic":       "Artiskt veður!",
    "f_penguins":     "ahh, tað eru pengvinir allastaðnis!",
    "f_brr":          "Brr, tað frystir.",
    "f_cold":         "Maður, tað er kalt.",
    "f_chilly":       "Nokkso kalt uttanfyri, ha?",
    "f_rock":         "Tempererað, rokka víðari!",
    "f_cruising":     "Vit koyra í miðjuni.",
    "f_regular":      "Heilt vanligt, maður,",
    "f_dang":         "halt kipp tað er heitt!",
    "f_sweating":     "sveitti sum eitt svín.",
    "f_strong":       "Temperatururin er nógvur her",
    "f_leet":         "1337 gradir. Feitt!",
    "f_kidding":      "Tvætlar tú?",
    "f_armageddon":   "Tað er akkurát sum Armageddon uttanfyri.",
    "f_volcano":      "Býrt tú inni í einum gosfjalli?",

    "feels":          "",
    "its":            "tað eru %s %s gradir í %s",
    "description":    "%sThermo%s er ein háttur at síggja hvussu veðrið er. Hetta lítla lummatermometrið vísur verandi temperaturin uttanfyri."
  }
};

var default_lang = "en";
var current_lang = default_lang;
var ip_address = null;
var info_query_done = false;

isString = function(obj)
{
  return typeof(obj) == 'string';
};

function get_user_language()
{
  current_lang = default_lang;
  $.getJSON("http://robocat-newsletters.herokuapp.com/info", function (response) {
    console.log('got response ' + response);
    if (response && response.lang && isString(response.lang))
    {
      set_language(response.lang);
      ip_address = response.ip;

    } else {
      current_lang = default_lang;
    }

    info_query_done = true;
  });
}

function set_language(l)
{
  l = l.toLowerCase();

  if (lang[l] !== undefined){
    current_lang = l;
  } else {
    current_lang = default_lang;
  }
}

function _t(key) {
  var string = lang[current_lang][key];
  if (string === undefined || string === "")
  {
    sprintf(string = lang[default_lang][key]);
  }

  return string;
}